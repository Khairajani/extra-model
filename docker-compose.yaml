version: "3.4"
services:

  dev: &dev
    build:
      dockerfile: "./docker/Dockerfile"
      context: "."
    image: "extra-model-dev"
    volumes:
      - ./extra_model:/package/extra_model
      - ./tests:/package/tests
      - ./embeddings:/embeddings
      - ./io:/io

  extra-model:
    <<: *dev
    entrypoint: "extra-model"
    command: "--help"

  # run all the tests and linting locally
  # - black & isort will format code to address issues
  test:
    <<: *dev
    command: docker/run_tests.sh --format-code
